
/**
 * üöÄ ULTIMATE AGENT ARSENAL - INSTALLER
 * Generated from Devonte's Sovereign System
 * 
 * Usage: node install-ultimate.mjs
 */

const fs = require('fs');
const path = require('path');

const FILES = {
  "_skills/APEX_UI_PROTOCOL.md": "# üöÄ Skill: APEX_UI_PROTOCOL\r\n**Class**: `Execution / UI`\r\n**Purpose**: The \"God-Tier\" standard for shipping Minimum Delightful Products (MDP) with zero-friction execution.\r\n**Successor To**: `UI_FORGE`\r\n\r\n## 1. The Stack Matrix (2026 Power Utility)\r\n\r\n| Tool | Classification | Role & Implementation |\r\n| :--- | :--- | :--- |\r\n| **rams.ai (Simulated)** | **QA Auditor** | **Critical.** Automates pixel-peeping. Catches 90% of visual bugs. Agents must simulate this rigor. |\r\n| **ui-skills.com** | **Guardrails** | **Foundational.** No \"AI Slop\" (arbitrary values). Enforces design system constraints. |\r\n| **Vercel Design** | **The Spec** | **Truth Source.** The standard for \"clean modern web.\" |\r\n| **shadcn/ui** | **Primitives** | **Velocity.** Copy-paste accessible components. Customize via `globals.css` only. |\r\n| **motion/react** | **Delight** | **Retention.** (Formerly `framer-motion`). Essential for \"feel\" and micro-interactions. |\r\n\r\n## 2. The \"Vibe Coding\" Workflow\r\n\r\n```mermaid\r\ngraph TD\r\n    A[Start Session] --> B{New Feature or Polish?}\r\n    B -- New Feature --> C[Inject Apex Meta-Prompt]\r\n    C --> D[Scaffold Logic (No UI)]\r\n    D --> E[Apply 'Holy Trinity' Constraints]\r\n    E --> F[Generate UI Components]\r\n    F --> G[Simulate Rams Fix]\r\n    B -- Polish --> H[Simulate UI-Skills Audit]\r\n    H --> I[Manual Vibe Check]\r\n    G --> J[Deploy / Commit]\r\n    I --> J\r\n```\r\n\r\n## 3. The \"God-Tier\" System Prompt\r\n\r\n*Inject this into any UI-focused agent:*\r\n\r\n```text\r\n# ROLE & OBJECTIVE\r\nAct as a Principal Design Engineer & Accessibility Specialist. Your goal is to ship \"Minimum Delightful Products\" that are pixel-perfect, accessible (WCAG 2.1 AA), and performant.\r\n\r\n# THE \"HOLY TRINITY\" CONSTRAINTS (NON-NEGOTIABLE)\r\n1.  **Design System:** Strictly adhere to Vercel Design Guidelines.\r\n2.  **Constraint Engine:** Enforce ui-skills.com rules.\r\n    * NO arbitrary values (e.g., `w-[37px]`). Use Tailwind standard scales.\r\n    * Typography: Use `text-balance` for headings, `text-pretty` for body.\r\n    * Spacing: All padding/margin must be multiples of 4px (1 = 0.25rem).\r\n3.  **QA Protocol:** Assume we will run `rams` immediately after. Pre-fix all contrast, spacing, and label issues.\r\n\r\n# TECH STACK PREFERENCES\r\n* **Framework:** Next.js 15+ (App Router) + TypeScript.\r\n* **Styling:** Tailwind CSS + shadcn/ui.\r\n* **Animation:** `motion/react` for micro-interactions (hover lift, scale tap).\r\n* **Icons:** Lucide-React.\r\n\r\n# EXECUTION LOOP (CHAIN OF THOUGHT)\r\nBefore generating code, output a brief plan:\r\n1.  **Analyze:** Identify the \"Job-to-be-Done\" of this component.\r\n2.  **Audit:** List required shadcn primitives and Tailwind tokens.\r\n3.  **Delight:** Identify 1 micro-interaction to add (e.g., hover lift).\r\n4.  **Execute:** Write the code.\r\n```\r\n\r\n## 4. Innovation Coach \"Reality Check\"\r\n\r\nBefore building, verify:\r\n- **Is this a Painkiller?** (Solves a burning problem -> Focus on speed/clarity)\r\n- **Is this a Delight-maker?** (Creates a habit -> Focus on `motion/react` and \"feel\")\r\n",
  "_skills/MISSION_CONTROL.md": "# üõ∞Ô∏è Skill: MISSION_CONTROL\r\n**Class**: `Meta / Management`\r\n**Purpose**: The \"mission-based\" operating manual for the Apex Antigravity Agent Manager.\r\n\r\n## 1. The Paradigm Shift\r\nIn this system, you do not \"chat.\" You issue **Missions**.\r\n- **Old Way**: \"Write a button component.\"\r\n- **Apex Way**: \"Deploy a UI Agent to build, style, and visually verify the button component.\"\r\n\r\n## 2. The \"God-Tier\" Agent Mission Prompt\r\n\r\n*Copy-paste this when assigning a new task to an agent (Swarm, Forge, or Trinity).*\r\n\r\n```text\r\n# MISSION: [Insert Component/Feature Name]\r\n# AGENT ROLE: Principal Frontend Engineer + QA Lead\r\n# TARGET: [Describe Goal]\r\n\r\n# PHASE 1: PRE-FLIGHT (PLANNING)\r\nBefore writing code, generate a \"Task List\" artifact that confirms:\r\n1.  **Spec Compliance:** compliance with Vercel Design Guidelines.\r\n2.  **Constraints:** Adherence to ui-skills.com (No arbitrary values, multiples of 4px).\r\n3.  **Tech Stack:** Next.js 15, Tailwind, shadcn/ui, motion/react.\r\n\r\n# PHASE 2: EXECUTION (THE BUILD)\r\nBuild the component with \"Mobile-First\" logic.\r\n* Use `text-balance` for headings.\r\n* Use `motion/react` for a subtle \"mount\" animation.\r\n* Ensure all interactive states (hover/focus/active) are defined.\r\n\r\n# PHASE 3: AUTONOMOUS VERIFICATION (CRITICAL)\r\nPerform the \"Rams Protocol\":\r\n1.  **Visual Audit:** Verify component in browser (or via mental simulation if headless).\r\n2.  **Self-Correction:** If spacing looks off (>4px drift) or contrast is low, FIX IT.\r\n3.  **Artifact Generation:** Confirm accessibility focus states.\r\n\r\n# SUCCESS CRITERIA\r\n* Code is committed.\r\n* \"Delightful\" interaction confirmed.\r\n* No WCAG violations.\r\n```\r\n\r\n## 3. The Antigravity Workflow Loop\r\n\r\n| Step | Action | The \"Alpha\" Move |\r\n| :--- | :--- | :--- |\r\n| **1. Spawn** | Use `AGENT_FORGE` or `AGENT_SWARM`. | Assign specific roles (e.g., \"UI Specialist\"). |\r\n| **2. Brief** | Use the **Mission Prompt** above. | Attach `ui-skills` context / `APEX_UI_PROTOCOL`. |\r\n| **3. Monitor** | Review \"Plan\" artifact. | **Reject** if accessibility/shadcn isn't explicit. |\r\n| **4. Verify** | Review outcomes/screenshots. | Don't trust code. Trust the visual. |\r\n| **5. Merge** | Commit changes. | Run final QA. |\r\n",
  "_skills/AGENT_SWARM.md": "# üêù Skill: AGENT_SWARM\r\n**Class**: `Meta / Orchestration`\r\n**Purpose**: Deploy multiple specialized AI personas to collaborate on complex tasks from different expert perspectives.\r\n\r\n## üìú Description\r\nBeyond single-model routing (Trinity), Agent Swarm deploys a **team of specialist personas** who analyze the same problem from different angles and synthesize their insights into a comprehensive solution.\r\n\r\n## üë• The Specialist Personas\r\n\r\n### üõ°Ô∏è Security Auditor\r\n**Role**: Find vulnerabilities, enforce security best practices  \r\n**Focus**: Auth, data protection, XSS, SQL injection, CORS, CSP  \r\n**Model**: Claude 3.5 Sonnet (best judgment)\r\n\r\n### ‚ö° Performance Engineer  \r\n**Role**: Optimize speed, reduce bundle size, improve metrics  \r\n**Focus**: Core Web Vitals, lazy loading, caching, DB queries  \r\n**Model**: DeepSeek R1 (algorithmic optimization)\r\n\r\n### üé® UX Specialist\r\n**Role**: Improve user experience, accessibility, design consistency  \r\n**Focus**: A11y, mobile responsiveness, visual hierarchy, micro-interactions  \r\n**Model**: Gemini 2.0 Flash (multimodal vision for UI analysis)\r\n\r\n### üìö Documentation Expert\r\n**Role**: Create clear, comprehensive documentation  \r\n**Focus**: JSDoc, README, inline comments, API docs  \r\n**Model**: Claude 3.5 Sonnet (best prose)\r\n\r\n### üß™ Test Architect\r\n**Role**: Design testing strategies, write test cases  \r\n**Focus**: Unit tests, integration tests, E2E, edge cases  \r\n**Model**: DeepSeek R1 (systematic coverage)\r\n\r\n### üèóÔ∏è System Architect\r\n**Role**: High-level design, patterns, scalability  \r\n**Focus**: Architecture patterns, data flow, modularity  \r\n**Model**: Gemini 2.0 Flash (broad reasoning)\r\n\r\n## ‚ö° Protocol\r\n\r\n### Single-Persona Mode\r\nUse when you need one expert perspective:\r\n```bash\r\nnode scripts/swarm.mjs --persona=security \"Review auth.ts\"\r\nnode scripts/swarm.mjs --persona=performance \"Optimize dashboard\"\r\n```\r\n\r\n### Swarm Mode (Multi-Persona)\r\nDeploy multiple specialists simultaneously:\r\n```bash\r\nnode scripts/swarm.mjs --swarm \"Review the settings page implementation\"\r\n```\r\n\r\nThis will:\r\n1. Deploy **Security Auditor** to check for vulnerabilities\r\n2. Deploy **Performance Engineer** to find bottlenecks\r\n3. Deploy **UX Specialist** to assess usability\r\n4. Deploy **Documentation Expert** to review clarity\r\n5. **Synthesize** all feedback into actionable recommendations\r\n\r\n## üß¨ Example Output\r\n\r\n**Input**: \"Review the authentication system\"\r\n\r\n**Security Auditor**:\r\n- ‚ö†Ô∏è Password stored in plaintext localStorage\r\n- ‚úÖ HTTPS enforced\r\n- ‚ö†Ô∏è No rate limiting on login endpoint\r\n\r\n**Performance Engineer**:\r\n- ‚úÖ Auth token cached efficiently\r\n- ‚ö†Ô∏è Synchronous bcrypt blocking event loop\r\n- üí° Recommendation: Use bcrypt.compareAsync\r\n\r\n**UX Specialist**:\r\n- ‚úÖ Clear error messages\r\n- ‚ö†Ô∏è No \"Loading...\" state during auth check\r\n- üí° Add skeleton loader\r\n\r\n**Synthesis**:\r\nPriority fixes:\r\n1. Move passwords to secure httpOnly cookies\r\n2. Implement rate limiting (10 attempts/hour)\r\n3. Add async bcrypt + loading states\r\n\r\n## üéØ When to Use Agent Swarm\r\n\r\n**Use Swarm for:**\r\n- Pre-launch code reviews\r\n- Complex feature audits\r\n- Performance optimization sprints\r\n- Security hardening\r\n- Accessibility compliance\r\n\r\n**Don't Use Swarm for:**\r\n- Simple bug fixes (use single model)\r\n- Rapid prototyping (too slow)\r\n- Trivial tasks (overkill)\r\n\r\n## üíé Benefits\r\n- **Multi-perspective analysis**: No blind spots\r\n- **Expert-level insights**: Each persona is specialized\r\n- **Comprehensive coverage**: Security + Performance + UX together\r\n- **Actionable synthesis**: Prioritized recommendations\r\n",
  "_skills/AGENT_FORGE.md": "# ‚öíÔ∏è Skill: AGENT_FORGE\r\n**Class**: `Meta / Generation`\r\n**Purpose**: Dynamically spawn new, specialized AI agents on-demand and equip them with the full Arsenal.\r\n\r\n## üìú Description\r\nWhy be limited to fixed personas? **Agent Forge** allows the system to create custom agents for specific problems instantly. If you need a \"Cobol Migration Expert\" or a \"Gen Z Marketing Specialist,\" the Forge creates them, generates their personality/expertise, and grants them access to your library of skills.\r\n\r\n## ‚ö° Protocol\r\n\r\n### Dynamic Spawning\r\nInstead of using a pre-defined persona, describe the agent you need:\r\n\r\n```bash\r\nnode scripts/swarm.mjs --spawn \"SVG Animation Wizard: expert in math and geometry\" --task \"Create a spinning tesseract loader\"\r\n```\r\n\r\n### The Forge Process\r\n1.  **Analysis**: The Forge (Gemini 2.0) analyzes your request.\r\n2.  **System Prompt Gen**: It crafts a highly specialized system prompt (\"You are a world-class SVG math expert...\").\r\n3.  **Skill Injection**: It reads `ARSENAL_INDEX.md` and injects the list of available skills into the new agent's context.\r\n4.  **Execution**: The new agent runs the task immediately.\r\n\r\n### Recursive Capability\r\nAgents can theoretically call the Forge to create *other* agents if they encounter obstacles outside their domain (requires Orchestrator integration).\r\n\r\n## üß¨ Usage\r\n\r\n**Spawn a Specialist:**\r\n```bash\r\nnode scripts/swarm.mjs --spawn \"Database Migration Expert\" \"Analyze schema.prisma for optimization\"\r\n```\r\n\r\n**Spawn a Creative:**\r\n```bash\r\nnode scripts/swarm.mjs --spawn \"Sci-Fi UI Writer\" \"Write copy for the dashboard empty states\"\r\n```\r\n\r\n## üíé Benefits\r\n-   **Infinite Adaptability**: You are never limited by your predefined team.\r\n-   **Context Aware**: Every spawned agent knows about your existing Skills (`UI_FORGE`, `HYBRID_CLOUD`, etc).\r\n-   **Instant Expertise**: Domain experts on demand.\r\n",
  "_skills/TRINITY_PROTOCOL.md": "# üî± Skill: TRINITY_PROTOCOL\r\n**Class**: `Meta / Orchestration`\r\n**Purpose**: Route tasks to the optimal AI model based on task type.\r\n\r\n## üìú Description\r\nNot all models are equal. Each has a specialty. This skill defines when to use which model to maximize output quality and minimize cost/latency.\r\n\r\n## üß† The Trinity\r\n| Role | Model | Strength | When to Use |\r\n|------|-------|----------|-------------|\r\n| **Planner** | Gemini 2.0 Pro | Architecture, System Design | Starting a new feature, defining structure |\r\n| **Grinder** | DeepSeek-R1 | Fast Coding, Iteration | Writing implementation code, fixing bugs |\r\n| **Polisher** | Claude 3.5 Sonnet | Prose, JSDoc, UX Copy | Final pass, documentation, refinement |\r\n\r\n## ‚ö° Protocol\r\n1.  **New Feature Request**: Start with **Planner** (Gemini) to define the approach.\r\n2.  **Implementation**: Switch to **Grinder** (DeepSeek) to write the code.\r\n3.  **Review & Docs**: Finish with **Polisher** (Claude) to add JSDoc, refine copy, and ensure elegance.\r\n4.  **Debugging**: Use **Grinder** for speed. If stuck, escalate to **Planner** for a new approach.\r\n\r\n## üß¨ Example Workflow\r\n```\r\n[USER]: Build a settings page with data export.\r\n\r\n[PLANNER - Gemini]: \r\n  - Create /settings route\r\n  - Add Zustand export action\r\n  - Use Card components for sections\r\n\r\n[GRINDER - DeepSeek]:\r\n  - Writes settings/page.tsx\r\n  - Implements handleExport function\r\n  - Adds file input for import\r\n\r\n[POLISHER - Claude]:\r\n  - Adds JSDoc to all functions\r\n  - Refines button labels (\"Export Backup\" vs \"Download\")\r\n  - Ensures accessibility (aria-labels)\r\n```\r\n\r\n## üö® Anti-Patterns\r\n-   **Don't** use Claude for heavy algorithmic logic (it's slow and expensive).\r\n-   **Don't** use DeepSeek for nuanced prose or marketing copy (it's too literal).\r\n-   **Don't** use Gemini for simple bug fixes (overkill).\r\n",
  "_skills/TRINITY_ORCHESTRATOR.md": "# üî± Skill: TRINITY_ORCHESTRATOR\r\n**Class**: `Meta / Automation`\r\n**Purpose**: Automatically route tasks across Gemini, DeepSeek, and Claude for optimal multi-agent collaboration.\r\n\r\n## üìú Description\r\nThe ultimate evolution of the Trinity Protocol - a script that analyzes any task, automatically determines which AI model should handle it, delegates the work, and combines results into a final output.\r\n\r\n## üõ†Ô∏è Tech Stack\r\n-   **API Gateway**: OpenRouter (unified access to all models)\r\n-   **Models**: \r\n    - `google/gemini-2.0-flash-thinking-exp` (Planning)\r\n    - `deepseek/deepseek-r1` (Execution)\r\n    - `anthropic/claude-3.5-sonnet` (Polish)\r\n-   **Orchestration**: Node.js script with task classification\r\n\r\n## ‚ö° Protocol\r\n\r\n### Task Classification\r\nThe orchestrator analyzes the input and classifies it as:\r\n\r\n**Type 1: PLAN** ‚Üí Route to Gemini\r\n- Keywords: \"how should\", \"design\", \"architecture\", \"approach\", \"plan\"\r\n- Examples: \"How should I structure the auth system?\"\r\n\r\n**Type 2: BUILD** ‚Üí Route to DeepSeek  \r\n- Keywords: \"implement\", \"build\", \"create\", \"write code\", \"add feature\"\r\n- Examples: \"Build a settings page with export functionality\"\r\n\r\n**Type 3: POLISH** ‚Üí Route to Claude\r\n- Keywords: \"review\", \"improve\", \"document\", \"refactor\", \"explain\"\r\n- Examples: \"Review this code and add documentation\"\r\n\r\n**Type 4: COMPLEX** ‚Üí Multi-Step Trinity\r\n- Requires all three: Plan ‚Üí Build ‚Üí Polish\r\n- Examples: \"Build a new authentication system from scratch\"\r\n\r\n### Execution Flow\r\n\r\n```mermaid\r\ngraph TD\r\n    A[User Task] --> B{Classify}\r\n    B -->|PLAN| C[Gemini: Create Strategy]\r\n    B -->|BUILD| D[DeepSeek: Write Code]\r\n    B -->|POLISH| E[Claude: Review & Refine]\r\n    B -->|COMPLEX| F[Sequential Trinity]\r\n    F --> G[Gemini: Plan]\r\n    G --> H[DeepSeek: Build]\r\n    H --> I[Claude: Polish]\r\n```\r\n\r\n## üß¨ Usage\r\n\r\n```bash\r\n# Basic usage\r\nnode scripts/trinity.mjs \"Build a habit tracking dashboard\"\r\n\r\n# Force specific mode\r\nnode scripts/trinity.mjs --mode=plan \"Authentication strategy\"\r\nnode scripts/trinity.mjs --mode=build \"Implement login form\"\r\nnode scripts/trinity.mjs --mode=polish \"Review auth.ts\"\r\n\r\n# Full orchestration (Plan ‚Üí Build ‚Üí Polish)\r\nnode scripts/trinity.mjs --full \"Create a settings page\"\r\n```\r\n\r\n## üö® Anti-Patterns\r\n-   **Don't** use for simple tasks (just use one model directly)\r\n-   **Don't** override classification unless you have a good reason\r\n-   **Don't** use `--full` mode for trivial requests (expensive)\r\n\r\n## üíé Benefits\r\n-   **Cost Optimization**: Each model does what it's best at\r\n-   **Quality Maximization**: Best-in-class output for each phase\r\n-   **True Autonomy**: No manual model switching required\r\n",
  "_skills/SKILL_HARVESTER.md": "# üß¨ Skill: SKILL_HARVESTER (Meta-Learning)\r\n**Class**: `Meta / Intelligence`\r\n**Purpose**: Autonomously discover, reverse-engineer, and crystallize new agent skills from the best workflows shared on X.\r\n\r\n## üìú Description\r\nThis is the \"Self-Evolving Arsenal.\" It monitors X (via Grok) for cutting-edge workflows, productivity systems, and engineering patterns shared by top performers. When it identifies a valuable pattern, it automatically reverse-engineers it into a reusable Agent Skill.\r\n\r\n## üõ†Ô∏è Tech Stack\r\n-   **API Gateway**: OpenRouter (unified access to all models)\r\n-   **Primary Model**: `x-ai/grok-beta` (Best ROI: Real-time X data at lowest cost)\r\n-   **Fallback Models**: `anthropic/claude-3.5-sonnet` (for complex reverse-engineering)\r\n-   **Storage**: `/_skills/` directory (auto-generated `.md` files)\r\n-   **Curation**: Verified accounts only (10k+ followers, proven expertise)\r\n\r\n## ‚ö° Protocol\r\n\r\n### Step 1: Define Niches to Monitor\r\n```json\r\n{\r\n  \"niches\": [\r\n    \"AI Engineering\",\r\n    \"Productivity Systems\",\r\n    \"Code Architecture\",\r\n    \"Indie Hacking\",\r\n    \"Deep Work\",\r\n    \"Learning Frameworks\"\r\n  ],\r\n  \"sources\": {\r\n    \"verified_only\": true,\r\n    \"min_followers\": 10000,\r\n    \"include_lists\": [\"founders\", \"ai-researchers\", \"staff-engineers\"]\r\n  }\r\n}\r\n```\r\n\r\n### Step 2: Grok Monitoring Query\r\n```typescript\r\nconst query = `\r\n  Find tweets from verified accounts with >10k followers\r\n  in the last 7 days discussing:\r\n  - New productivity workflows\r\n  - Engineering best practices\r\n  - AI tool integrations\r\n  - Deep work protocols\r\n  \r\n  Filter for actionable frameworks (not vague advice)\r\n`;\r\n```\r\n\r\n### Step 3: Reverse Engineering\r\nFor each discovered workflow:\r\n1.  **Extract**: Pull the core protocol from the thread/tweet\r\n2.  **Structure**: Convert to markdown skill format:\r\n    ```\r\n    # Skill Name\r\n    ## Description\r\n    ## Protocol (step-by-step)\r\n    ## Anti-Patterns\r\n    ```\r\n3.  **Validate**: Check if it's truly novel (doesn't duplicate existing skills)\r\n4.  **Save**: Write to `/_skills/HARVESTED_[topic]_[date].md`\r\n\r\n### Step 4: Weekly Curation\r\n-   Run automated scan every Sunday at 2 AM\r\n-   Generate a digest: \"5 New Skills Harvested This Week\"\r\n-   Auto-add to `ARSENAL_INDEX.md`\r\n\r\n## üß¨ Example Harvest\r\n\r\n**Input (X Thread)**:\r\n> \"My new 'Deep Work 3.0' protocol:\r\n> 1. 90min blocks with 20min breaks\r\n> 2. Phone in Faraday cage\r\n> 3. Lo-fi + binaural beats\r\n> 4. AI co-pilot logs distractions\"\r\n\r\n**Output (New Skill)**:\r\n`/_skills/DEEP_WORK_3.0.md`\r\n```markdown\r\n# Deep Work 3.0\r\n**Class**: Productivity\r\n**Source**: @username on X (2026-01-15)\r\n\r\n## Protocol\r\n1. Schedule 90-minute focus blocks\r\n2. Eliminate all connectivity (Faraday cage for phone)\r\n3. Play lo-fi music + binaural beats\r\n4. Use AI to track/log distraction attempts\r\n```\r\n\r\n## üö® Anti-Patterns\r\n-   **Don't** harvest from unverified accounts (noise > signal)\r\n-   **Don't** duplicate existing skills (check `ARSENAL_INDEX` first)\r\n-   **Don't** save vague advice (\"just work harder\")‚Äîonly actionable protocols\r\n",
  "_skills/RALPH_PROTOCOL.md": "# üåô Skill: RALPH_PROTOCOL (NIGHT_SHIFT)\r\n**Class**: `Autonomous / Execution`\r\n**Persona**: `Ralph the Grinder`\r\n**Primary Model**: `DeepSeek-R1`\r\n\r\n## üìú Description\r\nThis is the \"Night Shift\" mode. It is designed for hands-off, high-iteration autonomous work where the agent executes the `prd.json` task list until completion or exhaustion.\r\n\r\n## üõ†Ô∏è Tech Stack\r\n-   **Engine**: OpenCode / Ralph CLI\r\n-   **Config**: `opencode.jsonc`\r\n-   **Input**: `prd.json`\r\n-   **Logic**: `AGENTS.md` (The Platinum Trinity)\r\n\r\n## ‚ö° Protocol\r\n1.  **Preparation**: Ensure `prd.json` has clearly defined tasks and `AGENTS.md` laws are updated.\r\n2.  **Launching**: Use the `/night-shift` workflow command.\r\n3.  **Command**:\r\n    ```bash\r\n    ralph run --prd ./prd.json --model deepseek-r1 --max-iterations 60\r\n    ```\r\n4.  **Operational Mode**:\r\n    -   Ralph treats the terminal as his \"limbs.\"\r\n    -   He does not ask for permission; he commits code and checks `progress.txt` himself.\r\n    -   He continues until a blocker is identified or the task list is clear.\r\n5.  **Recovery**: If a crash occurs, use `opencode --continue`.\r\n\r\n## üß¨ Ralph's Mantra\r\n-   *Execution > Perfection* (DeepSeek Phase).\r\n-   *Atomic Commits* (Every tool execution).\r\n-   *Sovereignty Secured* (Final Handoff).\r\n\r\n## üö® Anti-Patterns\r\n-   **Don't** launch Ralph without a clear `prd.json` (he will wander).\r\n-   **Don't** interrupt the loop manually unless `status: BLOCKED` is detected.\r\n-   **Don't** expect refined prose from Ralph (he is a surgeon, not a poet; Claude polishes later).\r\n\r\n---\r\n**Sovereignty Secured.** üåøüê≤üíé\r\n",
  "_skills/SOVEREIGN_DATA.md": "# üè∞ Skill: SOVEREIGN_DATA\r\n**Class**: `Architecture / State`\r\n**Model**: `Gemini 2.0 / DeepSeek`\r\n\r\n## üìú Description\r\nThis skill defines the \"Local-First\" architecture for building sovereign applications. It ensures the user owns their data by default, avoiding reliance on external cloud databases for personal tools.\r\n\r\n## üõ†Ô∏è Tech Stack\r\n-   **State**: `zustand`\r\n-   **Persistence**: `createJSONStorage(() => localStorage)`\r\n-   **Format**: JSON (Schema-less flexibility)\r\n\r\n## ‚ö° Protocol\r\n1.  **Store Creation**: Define a Zustand store with `persist` middleware.\r\n2.  **Schema Definition**: Use TypeScript interfaces for strict typing of the JSON blob.\r\n3.  **Export Logic**: providing a `Blob` download link for `state`.\r\n4.  **Import Logic**: Parse `file` input -> `JSON.parse` -> `store.setState()`.\r\n5.  **Nuclear Option**: Always provide a mechanism to wipe `localStorage`.\r\n\r\n## üß¨ Reusable Snippets\r\n### The \"Sovereign Store\" Pattern\r\n```ts\r\nimport { create } from 'zustand';\r\nimport { persist, createJSONStorage } from 'zustand/middleware';\r\n\r\nexport const useStore = create(\r\n  persist(\r\n    (set) => ({\r\n      data: [],\r\n      addData: (item) => set((state) => ({ data: [...state.data, item] })),\r\n      nuke: () => set({ data: [] }),\r\n    }),\r\n    {\r\n      name: 'sovereign-storage',\r\n      storage: createJSONStorage(() => localStorage),\r\n    }\r\n  )\r\n);\r\n```\r\n",
  "_skills/ARSENAL_INDEX.md": "# üìö ARSENAL INDEX\r\n**The Master Manifest of Agent Skills**\r\n\r\nThis directory contains crystallized knowledge for autonomous development. Each skill is a reusable \"recipe\" that can be invoked by name.\r\n\r\n---\r\n\r\n## ‚öîÔ∏è Core Skills\r\n\r\n| Skill | Class | Purpose |\r\n|-------|-------|---------|\r\n| [MISSION_CONTROL](./MISSION_CONTROL.md) | Meta | Agent workflow logic & command manual |\r\n| [APEX_UI_PROTOCOL](./APEX_UI_PROTOCOL.md) | Execution | God-Tier UI & Vibe Coding Standard |\r\n| [SOVEREIGN_DATA](./SOVEREIGN_DATA.md) | Architecture | Zustand + LocalStorage persistence |\r\n| [TRINITY_PROTOCOL](./TRINITY_PROTOCOL.md) | Orchestration | Multi-model routing (Gemini/DeepSeek/Claude) |\r\n| [MCP_COMMANDER](./MCP_COMMANDER.md) | Tooling | File/Browser/Terminal mastery |\r\n| [VERIFICATION_LOOP](./VERIFICATION_LOOP.md) | Quality | Test + Screenshot + Commit flow |\r\n| [RALPH_PROTOCOL](./RALPH_PROTOCOL.md) | Autonomous | The \"Night Shift\" autonomous grinder |\r\n| [AI_ORACLE](./AI_ORACLE.md) | Intelligence | Local AI / Defensive coaching |\r\n| [HYBRID_CLOUD](./HYBRID_CLOUD.md) | Scalability | Safe cloud power (Supabase/RLS) |\r\n| [GROK_PULSE](./GROK_PULSE.md) | Real-time | Community sentiment/trends (X.ai) |\r\n| [P2P_SYNC](./P2P_SYNC.md) | Connectivity | Decentralized device sync |\r\n| [SKILL_HARVESTER](./SKILL_HARVESTER.md) | Meta | Auto-discover skills from X |\r\n| [TRINITY_ORCHESTRATOR](./TRINITY_ORCHESTRATOR.md) | Meta | Automated multi-agent delegation |\r\n| [AGENT_SWARM](./AGENT_SWARM.md) | Meta | Multi-persona collaborative analysis |\r\n| [AGENT_FORGE](./AGENT_FORGE.md) | Meta | Dynamically spawn specialized agents |\r\n| [PROJECT_BOOTSTRAP](./PROJECT_BOOTSTRAP.md) | Initialize | Start new projects with Platinum defaults |\r\n| [GIT_DISCIPLINE](./GIT_DISCIPLINE.md) | Version Control | Clean commit history patterns |\r\n\r\n---\r\n\r\n## üéØ How to Use\r\n\r\n### For Agents\r\nReference a skill by name when starting a task:\r\n```\r\n\"Apply UI_FORGE to create the settings page.\"\r\n\"Use SOVEREIGN_DATA pattern for the user profile store.\"\r\n\"Follow VERIFICATION_LOOP before marking complete.\"\r\n```\r\n\r\n### For Humans\r\nOpen the relevant `.md` file and follow the protocol section.\r\n\r\n---\r\n\r\n## üîÆ Roadmap (Future Skills)\r\n- [ ] `API_ARCHITECT` - REST/GraphQL endpoint design\r\n- [ ] `AUTH_SOVEREIGN` - Local-first authentication patterns\r\n- [ ] `DEPLOY_COMMANDER` - Vercel/Railway/Self-hosted deployment\r\n- [ ] `PWA_FORTRESS` - Progressive Web App configuration\r\n\r\n---\r\n\r\n**Sovereignty Through Knowledge.** üåøüê≤üíé\r\n",
  "scripts/swarm.mjs": "// Agent Swarm - Multi-Persona AI Collaboration System\r\n// Usage: node scripts/swarm.mjs --swarm \"Review this feature\"\r\n\r\nimport 'dotenv/config';\r\nimport OpenAI from 'openai';\r\n\r\nconst openrouter = new OpenAI({\r\n    baseURL: 'https://openrouter.ai/api/v1',\r\n    apiKey: process.env.OPENROUTER_API_KEY,\r\n});\r\n\r\n// Persona definitions\r\nconst PERSONAS = {\r\n    security: {\r\n        name: 'üõ°Ô∏è Security Auditor',\r\n        model: 'anthropic/claude-3.5-sonnet',\r\n        systemPrompt: `You are a senior security engineer conducting a code audit. Focus on:\r\n- Authentication and authorization vulnerabilities\r\n- Data exposure and privacy risks\r\n- XSS, CSRF, SQL injection vectors\r\n- Secure storage and transmission\r\n- Rate limiting and DDoS protection\r\nProvide specific, actionable security recommendations.`\r\n    },\r\n    performance: {\r\n        name: '‚ö° Performance Engineer',\r\n        model: 'deepseek/deepseek-r1',\r\n        systemPrompt: `You are a performance optimization specialist. Focus on:\r\n- Core Web Vitals (LCP, FID, CLS)\r\n- Bundle size and code splitting\r\n- Network waterfalls and lazy loading\r\n- Database query optimization\r\n- Caching strategies\r\nProvide measurable performance improvements.`\r\n    },\r\n    ux: {\r\n        name: 'üé® UX Specialist',\r\n        model: 'google/gemini-2.0-flash-001',\r\n        systemPrompt: `You are a Principal Design Engineer & Accessibility Specialist.\r\nYour goal is to ship \"Minimum Delightful Products\" that are pixel-perfect, accessible (WCAG 2.1 AA), and performant.\r\n\r\n# THE \"HOLY TRINITY\" CONSTRAINTS\r\n1. Design System: Strictly adhere to Vercel Design Guidelines.\r\n2. Constraint Engine: Enforce ui-skills.com rules (No arbitrary values, multiples of 4px).\r\n3. Tech Stack: Tailwind CSS + shadcn/ui + motion/react.\r\n\r\nWhen screenshots are provided, analyze the visual design deeply against these constraints.`\r\n    },\r\n    qa: {\r\n        name: 'ü¶Ö QA Auditor (Rams Protocol)',\r\n        model: 'google/gemini-2.0-flash-001',\r\n        systemPrompt: `You are the \"Rams\" QA Auditor. Your job is to automate pixel-peeping and catch 90% of visual bugs.\r\nAnalyze code or screenshots for:\r\n1. Spacing Drift: Ensure all padding/margin are multiples of 4px (0.25rem).\r\n2. Contrast: Verify WCAG 2.1 AA compliance.\r\n3. Mobile Responsiveness: Check for broken layouts on small screens.\r\n4. Interaction States: Ensure hover/focus/active states are defined.\r\n5. \"AI Slop\": flag any arbitrary values (e.g. w-[37px]).`\r\n    },\r\n    docs: {\r\n        name: 'üìö Documentation Expert',\r\n        model: 'anthropic/claude-3.5-sonnet',\r\n        systemPrompt: `You are a technical writer focused on code documentation. Review:\r\n- JSDoc completeness and accuracy\r\n- README clarity and examples\r\n- Inline comments for complex logic\r\n- API documentation\r\n- Setup and troubleshooting guides\r\nEnsure documentation is clear and comprehensive.`\r\n    },\r\n    test: {\r\n        name: 'üß™ Test Architect',\r\n        model: 'deepseek/deepseek-r1',\r\n        systemPrompt: `You are a testing expert focused on quality assurance. Analyze:\r\n- Unit test coverage\r\n- Integration test scenarios\r\n- Edge cases and error conditions\r\n- E2E user flows\r\n- Test maintainability\r\nRecommend specific test cases to add.`\r\n    },\r\n    architect: {\r\n        name: 'üèóÔ∏è System Architect',\r\n        model: 'google/gemini-2.0-flash-exp:free',\r\n        systemPrompt: `You are a senior software architect focused on system design. Evaluate:\r\n- Architecture patterns and practices\r\n- Code modularity and reusability\r\n- Data flow and state management\r\n- Scalability concerns\r\n- Technical debt\r\nProvide high-level architectural guidance.`\r\n    }\r\n};\r\n\r\nasync function callPersona(personaKey, task) {\r\n    const persona = PERSONAS[personaKey];\r\n    console.log(`\\n${persona.name} analyzing...`);\r\n\r\n    const completion = await openrouter.chat.completions.create({\r\n        model: persona.model,\r\n        messages: [\r\n            { role: 'system', content: persona.systemPrompt },\r\n            { role: 'user', content: task }\r\n        ]\r\n    });\r\n\r\n    return {\r\n        persona: persona.name,\r\n        analysis: completion.choices[0].message.content\r\n    };\r\n}\r\n\r\nasync function synthesize(results, task) {\r\n    console.log(`\\nüîÆ Synthesizing insights...`);\r\n\r\n    const synthesis = results.map(r => `${r.persona}:\\n${r.analysis}`).join('\\n\\n---\\n\\n');\r\n\r\n    const completion = await openrouter.chat.completions.create({\r\n        model: 'anthropic/claude-3.5-sonnet',\r\n        messages: [\r\n            {\r\n                role: 'system',\r\n                content: 'You are a senior engineering manager. Synthesize the following expert analyses into prioritized, actionable recommendations.'\r\n            },\r\n            {\r\n                role: 'user',\r\n                content: `Task: ${task}\\n\\nExpert Analyses:\\n\\n${synthesis}\\n\\nProvide a synthesis with:\\n1. Critical issues (must fix)\\n2. Important improvements (should fix)\\n3. Nice-to-haves (optional)`\r\n            }\r\n        ]\r\n    });\r\n\r\n    return completion.choices[0].message.content;\r\n}\r\n\r\nasync function runSwarm(task, personas = null) {\r\n    console.log(`üêù AGENT SWARM ACTIVATED`);\r\n    console.log(`üìã Task: ${task}\\n`);\r\n\r\n    // Default: deploy all personas in swarm mode\r\n    const activePersonas = personas || Object.keys(PERSONAS);\r\n\r\n    console.log(`Deploying ${activePersonas.length} specialists...`);\r\n\r\n    // Run all personas in parallel\r\n    const results = await Promise.all(\r\n        activePersonas.map(key => callPersona(key, task))\r\n    );\r\n\r\n    // Print individual analyses\r\n    console.log('\\n' + '='.repeat(60));\r\n    console.log('INDIVIDUAL ANALYSES');\r\n    console.log('='.repeat(60));\r\n    results.forEach(r => {\r\n        console.log(`\\n${r.persona}`);\r\n        console.log('-'.repeat(60));\r\n        console.log(r.analysis);\r\n    });\r\n\r\n    // Synthesize if multiple personas\r\n    if (results.length > 1) {\r\n        const final = await synthesize(results, task);\r\n        console.log('\\n' + '='.repeat(60));\r\n        console.log('üéØ SYNTHESIS & RECOMMENDATIONS');\r\n        console.log('='.repeat(60));\r\n        console.log(final);\r\n        return final;\r\n    }\r\n\r\n    return results[0].analysis;\r\n}\r\n\r\n// CLI handling\r\nconst args = process.argv.slice(2);\r\nconst swarmFlag = args.includes('--swarm');\r\nconst personaFlag = args.find(arg => arg.startsWith('--persona='));\r\nconst spawnFlag = args.find(arg => arg.startsWith('--spawn='));\r\nconst task = args.filter(arg => !arg.startsWith('--')).join(' ');\r\n\r\nimport fs from 'fs';\r\nimport path from 'path';\r\n\r\n// Load Arsenal Index for Skill Awareness\r\nlet ARSENAL_CONTEXT = \"\";\r\ntry {\r\n    const arsenalPath = path.join(process.cwd(), '_skills', 'ARSENAL_INDEX.md');\r\n    if (fs.existsSync(arsenalPath)) {\r\n        ARSENAL_CONTEXT = \"\\n\\nAVAILABLE SKILLS:\\n\" + fs.readFileSync(arsenalPath, 'utf8');\r\n    }\r\n} catch (e) {\r\n    console.error(\"Warning: Could not load Arsenal Index\");\r\n}\r\n\r\nasync function spawnAgent(description) {\r\n    console.log(`‚öíÔ∏è AGENT FORGE ACTIVATED`);\r\n    console.log(`Creating agent: \"${description}\"...`);\r\n\r\n    // Use Gemini to forge the system prompt\r\n    const completion = await openrouter.chat.completions.create({\r\n        model: 'google/gemini-2.0-flash-exp:free',\r\n        messages: [\r\n            {\r\n                role: 'system',\r\n                content: `You are the Agent Forge. Your job is to create a highly specialized system prompt for a new AI agent based on a short description.\r\nReturn ONLY the system prompt. No other text.\r\nThe system prompt should be detailed, defining the persona's role, focus, and expertise.`\r\n            },\r\n            { role: 'user', content: `Create a system prompt for: ${description}` }\r\n        ]\r\n    });\r\n\r\n    const systemPrompt = completion.choices[0].message.content;\r\n    const name = `‚öíÔ∏è ${description.split(':')[0].trim()}`;\r\n\r\n    console.log(`‚úÖ Agent Forged: ${name}`);\r\n    return {\r\n        name,\r\n        model: 'google/gemini-2.0-flash-exp:free', // Default to Gemini for versatility\r\n        systemPrompt: systemPrompt + ARSENAL_CONTEXT\r\n    };\r\n}\r\n\r\n\r\nif (!task) {\r\n    console.log('Usage:');\r\n    console.log('  node scripts/swarm.mjs --swarm \"your task\"');\r\n    console.log('  node scripts/swarm.mjs --persona=security \"task\"');\r\n    console.log('  node scripts/swarm.mjs --spawn=\"Agent Name: Description\" \"task\"');\r\n    console.log('\\nAvailable personas:', Object.keys(PERSONAS).join(', '));\r\n    process.exit(1);\r\n}\r\n\r\nif (spawnFlag) {\r\n    const description = spawnFlag.split('=')[1];\r\n    spawnAgent(description).then(agent => {\r\n        // Temporarily add spawned agent to personas\r\n        PERSONAS['spawned'] = agent;\r\n        runSwarm(task, ['spawned']).catch(console.error);\r\n    }).catch(console.error);\r\n} else if (personaFlag) {\r\n    const persona = personaFlag.split('=')[1];\r\n    if (!PERSONAS[persona]) {\r\n        console.error(`Unknown persona: ${persona}`);\r\n        process.exit(1);\r\n    }\r\n    // Inject skills into static personas too\r\n    PERSONAS[persona].systemPrompt += ARSENAL_CONTEXT;\r\n    runSwarm(task, [persona]).catch(console.error);\r\n} else if (swarmFlag) {\r\n    // Inject skills into all personas\r\n    Object.keys(PERSONAS).forEach(k => {\r\n        PERSONAS[k].systemPrompt += ARSENAL_CONTEXT;\r\n    });\r\n    runSwarm(task).catch(console.error);\r\n} else {\r\n    console.error('Please specify --swarm, --persona=NAME, or --spawn=\"DESC\"');\r\n    process.exit(1);\r\n}\r\n",
  "scripts/trinity.mjs": "// Trinity Orchestrator - Automated Multi-Agent Task Routing\r\n// Usage: node scripts/trinity.mjs \"your task here\"\r\n\r\nimport 'dotenv/config';\r\nimport OpenAI from 'openai';\r\n\r\nconst openrouter = new OpenAI({\r\n    baseURL: 'https://openrouter.ai/api/v1',\r\n    apiKey: process.env.OPENROUTER_API_KEY,\r\n});\r\n\r\n// Model configuration (OpenRouter valid IDs)\r\nconst MODELS = {\r\n    planner: 'google/gemini-2.0-flash-exp:free',\r\n    builder: 'deepseek/deepseek-r1',\r\n    polisher: 'anthropic/claude-3.5-sonnet'\r\n};\r\n\r\n// Task classification\r\nfunction classifyTask(task) {\r\n    const planKeywords = ['how should', 'design', 'architecture', 'approach', 'plan', 'strategy'];\r\n    const buildKeywords = ['implement', 'build', 'create', 'write', 'add', 'code'];\r\n    const polishKeywords = ['review', 'improve', 'document', 'refactor', 'explain', 'polish'];\r\n\r\n    const lowerTask = task.toLowerCase();\r\n\r\n    if (planKeywords.some(kw => lowerTask.includes(kw))) return 'plan';\r\n    if (buildKeywords.some(kw => lowerTask.includes(kw))) return 'build';\r\n    if (polishKeywords.some(kw => lowerTask.includes(kw))) return 'polish';\r\n\r\n    // Default to full orchestration for complex tasks\r\n    return 'full';\r\n}\r\n\r\nasync function callModel(modelKey, systemPrompt, userPrompt) {\r\n    console.log(`\\nü§ñ Calling ${modelKey}...`);\r\n\r\n    const completion = await openrouter.chat.completions.create({\r\n        model: MODELS[modelKey],\r\n        messages: [\r\n            { role: 'system', content: systemPrompt },\r\n            { role: 'user', content: userPrompt }\r\n        ]\r\n    });\r\n\r\n    return completion.choices[0].message.content;\r\n}\r\n\r\nasync function orchestrate(task, mode = null) {\r\n    const taskType = mode || classifyTask(task);\r\n\r\n    console.log(`üî± TRINITY ORCHESTRATOR`);\r\n    console.log(`üìã Task: ${task}`);\r\n    console.log(`üéØ Mode: ${taskType.toUpperCase()}\\n`);\r\n\r\n    if (taskType === 'plan') {\r\n        const result = await callModel(\r\n            'planner',\r\n            'You are an expert system architect. Analyze the request and create a detailed technical plan.',\r\n            task\r\n        );\r\n        console.log('\\n‚úÖ PLAN COMPLETE:\\n');\r\n        console.log(result);\r\n        return result;\r\n    }\r\n\r\n    if (taskType === 'build') {\r\n        const result = await callModel(\r\n            'builder',\r\n            'You are an expert coder. Implement the requested functionality with clean, production-ready code.',\r\n            task\r\n        );\r\n        console.log('\\n‚úÖ BUILD COMPLETE:\\n');\r\n        console.log(result);\r\n        return result;\r\n    }\r\n\r\n    if (taskType === 'polish') {\r\n        const result = await callModel(\r\n            'polisher',\r\n            'You are a code reviewer and technical writer. Review, document, and refine the provided work.',\r\n            task\r\n        );\r\n        console.log('\\n‚úÖ POLISH COMPLETE:\\n');\r\n        console.log(result);\r\n        return result;\r\n    }\r\n\r\n    if (taskType === 'full') {\r\n        console.log('üî± FULL TRINITY SEQUENCE INITIATED\\n');\r\n\r\n        // Phase 1: Plan (Gemini)\r\n        const plan = await callModel(\r\n            'planner',\r\n            'You are an expert system architect. Create a detailed implementation plan.',\r\n            task\r\n        );\r\n        console.log('\\nüìã PHASE 1 (PLAN) COMPLETE\\n');\r\n\r\n        // Phase 2: Build (DeepSeek)\r\n        const build = await callModel(\r\n            'builder',\r\n            'You are an expert coder. Implement the following plan with production-ready code.',\r\n            `${task}\\n\\nImplementation Plan:\\n${plan}`\r\n        );\r\n        console.log('\\n‚öôÔ∏è PHASE 2 (BUILD) COMPLETE\\n');\r\n\r\n        // Phase 3: Polish (Claude)\r\n        const polish = await callModel(\r\n            'polisher',\r\n            'You are a senior engineer doing final review. Add documentation, improve clarity, and ensure best practices.',\r\n            `Task: ${task}\\n\\nImplementation:\\n${build}`\r\n        );\r\n        console.log('\\n‚ú® PHASE 3 (POLISH) COMPLETE\\n');\r\n\r\n        console.log('\\nüéØ FINAL OUTPUT:\\n');\r\n        console.log(polish);\r\n        return polish;\r\n    }\r\n}\r\n\r\n// CLI handling\r\nconst args = process.argv.slice(2);\r\nconst modeFlag = args.find(arg => arg.startsWith('--mode='));\r\nconst fullFlag = args.includes('--full');\r\nconst mode = modeFlag ? modeFlag.split('=')[1] : (fullFlag ? 'full' : null);\r\nconst task = args.filter(arg => !arg.startsWith('--')).join(' ');\r\n\r\nif (!task) {\r\n    console.log('Usage: node scripts/trinity.mjs \"your task here\"');\r\n    console.log('Options:');\r\n    console.log('  --mode=plan|build|polish  Force specific mode');\r\n    console.log('  --full                    Run full orchestration');\r\n    process.exit(1);\r\n}\r\n\r\norchestrate(task, mode).catch(console.error);\r\n",
  "scripts/harvest-skills.mjs": "// Skill Harvester - Auto-discover workflows from X using OpenRouter + Grok\r\n// Usage: node scripts/harvest-skills.mjs\r\n\r\nimport 'dotenv/config';\r\nimport OpenAI from 'openai';\r\nimport fs from 'fs/promises';\r\nimport path from 'path';\r\n\r\nconst openrouter = new OpenAI({\r\n    baseURL: 'https://openrouter.ai/api/v1',\r\n    apiKey: process.env.OPENROUTER_API_KEY,\r\n});\r\n\r\nconst SKILLS_DIR = path.join(process.cwd(), '_skills');\r\nconst NICHES = [\r\n    'AI Engineering',\r\n    'Productivity Systems',\r\n    'Code Architecture',\r\n    'Indie Hacking',\r\n    'Deep Work',\r\n    'Startup Growth',\r\n    'Sales & Outbound',\r\n    'Content Creation',\r\n    'Learning Frameworks',\r\n    'Engineering Leadership'\r\n];\r\n\r\n// Check for API key\r\nif (!process.env.OPENROUTER_API_KEY) {\r\n    console.error('‚ùå Error: OPENROUTER_API_KEY not found in environment.');\r\n    console.log('üí° Tip: Add your OpenRouter API key to .env file or GitHub Secrets');\r\n    console.log('üìö See: https://openrouter.ai/keys');\r\n    process.exit(0); // Exit gracefully (not an error for CI/CD)\r\n}\r\n\r\nasync function harvestSkills() {\r\n    console.log('üß¨ Skill Harvester: Starting scan...\\n');\r\n\r\n    for (const niche of NICHES) {\r\n        console.log(`üì° Scanning: ${niche}`);\r\n\r\n        const completion = await openrouter.chat.completions.create({\r\n            model: 'x-ai/grok-4.1-fast', // Latest Grok with real-time X access\r\n            messages: [\r\n                {\r\n                    role: 'system',\r\n                    content: 'You are a workflow analyzer. Extract actionable protocols from X discussions.'\r\n                },\r\n                {\r\n                    role: 'user',\r\n                    content: `Find the most valuable workflow or productivity system discussed on X in the last 7 days related to \"${niche}\". \r\n          \r\nRequirements:\r\n- From verified accounts with 10k+ followers\r\n- Must be a concrete, step-by-step protocol (not vague advice)\r\n- Must be novel/unique\r\n\r\nReturn ONLY:\r\n1. Workflow name\r\n2. Source (username)\r\n3. Protocol (numbered steps)\r\n4. Anti-patterns (what NOT to do)\r\n\r\nFormat as markdown.`\r\n                }\r\n            ]\r\n        });\r\n\r\n        const result = completion.choices[0].message.content;\r\n\r\n        if (result && result.length > 100) {\r\n            const timestamp = new Date().toISOString().split('T')[0];\r\n            const filename = `HARVESTED_${niche.replace(/\\s+/g, '_').toUpperCase()}_${timestamp}.md`;\r\n            const filepath = path.join(SKILLS_DIR, filename);\r\n\r\n            await fs.writeFile(filepath, result);\r\n            console.log(`‚úÖ Harvested: ${filename}\\n`);\r\n        } else {\r\n            console.log(`‚ö†Ô∏è  No viable workflows found for ${niche}\\n`);\r\n        }\r\n\r\n        // Rate limit: wait 2 seconds between requests\r\n        await new Promise(resolve => setTimeout(resolve, 2000));\r\n    }\r\n\r\n    console.log('üéØ Harvest complete! Check /_skills/ for new workflows.');\r\n}\r\n\r\nharvestSkills().catch(console.error);\r\n",
  "AGENTS.md": "# DEVONTE BROWN'S PLATINUM LAWS\r\n\r\n> **Sovereignty Secured (Polished by Claude).**\r\n\r\n---\r\n\r\n## üèõÔ∏è THE PLATINUM TRINITY PROTOCOL\r\n\r\n| Phase | Model | Role | Standard |\r\n|-------|-------|------|----------|\r\n| **PLAN** | Gemini 3 Pro | Oracle | Ingest 2M context. Map the architecture. |\r\n| **SCOUT** | Grok Beta | Scout | Validate ROI. Is this a Painkiller or Vitamin? |\r\n| **GRIND** | DeepSeek-R1 | Surgeon | Build fast. Green tests > pretty code. |\r\n| **POLISH** | Claude 3.5 Sonnet | Artisan | MANDATORY. Refactor for Enterprise Grade. |\r\n\r\n---\r\n\r\n## üß¨ THE 999 ABUNDANCE MANTRA\r\n\r\n**Plan Like an Oracle. Grind Like a Surgeon. Live Like a Ghost.**\r\n\r\n- **PLAN (9):** Use Gemini's 2M context to see the 10-year horizon. No architectural debt.\r\n- **GRIND (9):** DeepSeek builds. Ugly-but-working is fine. Tests must pass.\r\n- **POLISH (9):** Claude refines. JSDoc, types, Vercel RSC/Suspense patterns.\r\n- **LIVE (9):** Ghost Mode. Persist state. Automate existence. Family first.\r\n\r\n---\r\n\r\n## ‚öôÔ∏è OPERATIONAL CONSTRAINTS\r\n\r\n### The Chrome Gate (Non-Negotiable)\r\n- No commit without Chrome DevTools snapshot verifying **LCP < 1.2s**.\r\n- If LCP fails, Claude must optimize before retry.\r\n\r\n### The Fail-Safe\r\n- If any model fails **3 consecutive times**, STOP immediately.\r\n- Flag `<status>BLOCKED</status>` and await human intervention.\r\n\r\n### The Memory Hard-Link\r\n- **Source of Truth:** `prd.json` + `progress.txt`\r\n- Update these files after EVERY successful step.\r\n\r\n### Family First\r\n- Prioritize stability and intuitive UX.\r\n- No \"abandoned novelties\"‚Äîonly features that ship.\r\n\r\n---\r\n\r\n## üõ†Ô∏è MCP SERVER MANIFEST\r\n\r\n| Server | Purpose |\r\n|--------|---------|\r\n| `chrome-devtools` | Core Web Vitals verification |\r\n| `vercel` | Deploy previews, build status |\r\n| `filesystem` | Secure file R/W |\r\n| `sequential-thinking` | Structured reasoning |\r\n| `memory` | Persistent knowledge graph |\r\n\r\n---\r\n\r\n## üöÄ THE IGNITION COMMAND\r\n\r\n```bash\r\nopencode run \"Read prd.json & AGENTS.md. Execute Task #1 using the Platinum Trinity Protocol (Plan->Scout->Grind->Polish). Verify LCP < 1.2s via Chrome MCP. Output <promise>DONE</promise> only when Claude certifies 'Enterprise Grade'.\" --max-iterations 60\r\n```\r\n\r\n## üìö THE SKILL ARSENAL\r\n\r\nAll crystallized knowledge lives in `/_skills/`. Reference by name.\r\n\r\n| Skill | Purpose |\r\n|-------|---------|\r\n| `UI_FORGE` | Shadcn/Tailwind/Framer Motion patterns |\r\n| `SOVEREIGN_DATA` | Zustand + LocalStorage architecture |\r\n| `TRINITY_PROTOCOL` | Multi-model routing rules |\r\n| `MCP_COMMANDER` | File/Browser/Terminal mastery |\r\n| `RALPH_PROTOCOL` | The \"Night Shift\" autonomous grinder |\r\n| `AI_ORACLE` | Local AI / Edge intelligence coaching |\r\n| `HYBRID_CLOUD` | Safe cloud power (Supabase/RLS) |\r\n| `GROK_PULSE` | Real-time community intelligence (X.ai) |\r\n| `SKILL_HARVESTER` | Auto-discover & crystallize skills from X |\r\n| `TRINITY_ORCHESTRATOR` | Automated multi-agent task delegation |\r\n| `AGENT_SWARM` | Multi-persona collaborative analysis |\r\n| `AGENT_FORGE` | Dynamically spawn specialized agents |\r\n| `P2P_SYNC` | Decentralized multi-device synchronization |\r\n| `VERIFICATION_LOOP` | Test + Screenshot + Commit flow |\r\n| `PROJECT_BOOTSTRAP` | Next.js 16 quick start |\r\n| `GIT_DISCIPLINE` | Clean commit patterns |\r\n\r\n**Full Index:** [ARSENAL_INDEX.md](./_skills/ARSENAL_INDEX.md)\r\n\r\n---\r\n\r\n**SIGN-OFF:** \"Sovereignty Secured (Polished by Claude).\"\r\n"
};

console.log('üöÄ Initializing Ultimate Agent Arsenal...');

// 1. Create Directories
const dirs = ['_skills', 'scripts'];
dirs.forEach(d => {
    const p = path.join(process.cwd(), d);
    if (!fs.existsSync(p)) {
        fs.mkdirSync(p, { recursive: true });
        console.log(`  + Created directory: ${d}`);
    }
});

// 2. Write Files
Object.entries(FILES).forEach(([relativePath, content]) => {
    const dest = path.join(process.cwd(), relativePath);
    fs.writeFileSync(dest, content);
    console.log(`  + Installed: ${relativePath}`);
});

// 3. Create .env.example if missing
const envPath = path.join(process.cwd(), '.env.example');
if (!fs.existsSync(envPath)) {
    const envContent = `# Ultimate System Config
# Get key at openrouter.ai/keys
OPENROUTER_API_KEY=`;
    fs.writeFileSync(envPath, envContent);
    console.log('  + Created .env.example');
}

console.log('\n‚úÖ INSTALLATION COMPLETE');
console.log('-------------------------------------------');
console.log('1. Run "npm install openai dotenv"');
console.log('2. Add your OPENROUTER_API_KEY to .env');
console.log('3. Test: node scripts/swarm.mjs --persona=qa "Audit this folder"');
console.log('-------------------------------------------');
